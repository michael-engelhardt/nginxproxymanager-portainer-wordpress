#
# https://hub.docker.com/_/wordpress
#
#
# Status: Works after setup, but crashes after you add another
# network to the "wordpress_app_1"-service
#
version: "3"
services:
  app:
    image: "wordpress:latest"
    restart: always
    ports:
      # Which Portsetup do I need to Proxy Host on Port 8080 @see /portainer and /nginxproxymanager?
      - 8080:80
    environment:
      DB_MYSQL_HOST: "db"
      DB_MYSQL_PORT: 3306
      DB_MYSQL_USER: "npm"
      DB_MYSQL_PASSWORD: "npm"
      DB_MYSQL_NAME: "npm"
      # Uncomment this if IPv6 is not enabled on your host
      # DISABLE_IPV6: 'true'
    volumes:
      - wordpress:/var/www/html
    depends_on:
      - db
  db:
    image: "mysql:5.7"
    restart: always
    environment:
      MYSQL_ROOT_PASSWORD: "npm"
      MYSQL_DATABASE: "npm"
      MYSQL_USER: "npm"
      MYSQL_PASSWORD: "npm"
    volumes:
      - db:/var/lib/mysql

volumes:
  wordpress:
  db:
# Proxynetwork
# If I add this, wordpress doesn't work
#networks:
#  default:
#    external:
#      name: scoobydoo
